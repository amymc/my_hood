<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>What's happenin' in my 'hood?</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="">
  <meta name="author" content="">

  <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
  <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]--> 

  <link href="/assets/application.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/bootstrap_and_overrides.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/events.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/gmaps4rails.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/maps.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/scaffolds.css?body=1" media="screen" rel="stylesheet" type="text/css" />
  <link href="/assets/gmaps4rails.css?body=1" media="screen" rel="stylesheet" type="text/css" />
  <script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-transition.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-alert.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-modal.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-dropdown.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-scrollspy.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tab.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-tooltip.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-popover.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-button.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-collapse.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-carousel.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-typeahead.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap-affix.js?body=1" type="text/javascript"></script>
<script src="/assets/bootstrap.js?body=1" type="text/javascript"></script>
<script src="/assets/events.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.base.js?body=1" type="text/javascript"></script>
<script src="/assets/gmaps4rails/gmaps4rails.googlemaps.js?body=1" type="text/javascript"></script>
<script src="/assets/map.js?body=1" type="text/javascript"></script>
<script src="/assets/maps.js?body=1" type="text/javascript"></script>
<script src="/assets/sessions.js?body=1" type="text/javascript"></script>
<script src="/assets/users.js?body=1" type="text/javascript"></script>
<script src="/assets/application.js?body=1" type="text/javascript"></script>
  
  <meta content="authenticity_token" name="csrf-param" />
<meta content="JZro9oiTl8p1dXLvHOYrRk0YxMDtXWJW/UYHX1iitpI=" name="csrf-token" />
  
</head>
<body>

  <div id="wrap">
  <div class="navbar navbar-fixed-top">
 	<div class="navbar navbar-inverse">
    	<div class="navbar-inner">
      		<div class="container">
       			<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
          			<span class="icon-bar"></span>
          			<span class="icon-bar"></span>
          			<span class="icon-bar"></span>
       			</a>
        
        		<a href="/maps" class="brand">What's happenin in my hood?</a>
        		
        		<div class="nav-collapse">
          			<ul class="nav">
            			<li><a href="/maps"><i class="icon-home icon-white"></i> Home</a></li>
            			<li><a href="/events">Events</a></li>
            			<li><a href="/contact">Contact</a></li>
          			</ul>
        		</div>
    		</div>
    	</div>  
	</div>
  </div>
  <div class="container">
    

 
<body>
	<div class="search">	
	<div class="input-append">
			<form class="navbar-search pull-right">
			<form accept-charset="UTF-8" action="/events" method="get"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /></div>
  				<input id="search" name="search" type="text" />
  				 <button type="submit" class="btn btn-inverse">
   					 search <i class="icon-search icon-white"></i> 
   				</button>
</form>			</form>
 	</div>
 	</div>
 </ul>
 <br/>
  <br/>
   <br/>
   
    
 
 <div class="listing">	
 
<div class="event_item">
 <table class="table table-hover">
  <thead>
  <tr>
    <th></th>
    <th>Title</th>
    <th class="hidden-phone">Description</th>
    <th class="hidden-phone">Date</th>
    <th class="hidden-phone">Price</th>
    <th class="hidden-phone">Genre</th>
    <th class="hidden-phone">Location</th>
  </tr>
  </thead>
<tbody>

  </tbody>
</table>
  </div> 

</div>




    

<h1>0 events found within your search radius</h1>
<ol>
</ol>


<br/>
<br/>
<br/>
<br/>
<div id="map">
         
         
<div class="map_container"> 
  <div id="map" class="gmaps4rails_map"></div>
</div>

         </div>
         

  


</body>
         


    
  </div>

       <div id="push"></div>
    </div>
  <div id="footer">
    <hr/>
      <p>&copy; Amy McCarthy 2012</p>
  </div>

</body>
  <script src="//maps.google.com/maps/api/js?v=3.8&amp;sensor=false&amp;client=&amp;key=&amp;libraries=geometry&amp;language=&amp;hl=&amp;region=" type="text/javascript"></script>

<script type="text/javascript">
Gmaps.map = new Gmaps4RailsGoogle();
Gmaps.load_map = function() {
Gmaps.map.initialize();
Gmaps.map.markers = [];
Gmaps.map.create_markers();
Gmaps.map.adjustMapToBounds();
Gmaps.map.callback();
};
Gmaps.oldOnload = window.onload;
 window.onload = function() { Gmaps.triggerOldOnload(); Gmaps.loadMaps(); };
</script>
        <script type="text/javascript">
        var lat;
    	var lng;
    	//var markerArray = #<ActiveRecord::Relation:0x00000102e71578>;
        
   (Gmaps.map.geolocationSuccess = function(){
          if(Gmaps.map.callback){
            lng = Gmaps.map.userLocation.lng();
            lat = Gmaps.map.userLocation.lat();
            Gmaps.map.addMarkers([{
                "lng": lng,
                "lat": lat,
                "picture": "http://gmaps-samples.googlecode.com/svn/trunk/markers/pink/blank.png",
                "width": "37",
                "height": "34",
                
            }]);
              console.log ("test")
  // addEventMarkers = function()
  // if(Gmaps.map.callback){
  // Gmaps.map.addMarkers{
   //Event.near([lat,lng],2)
   
   //}
   
   
     //Gmaps.map.addMarkers([[]]);}       
        
  // Gmaps.map.addMarkers([]);
   
       console.log("shit")
                 
      
//$(document).ready(function() {
  //  Gmaps.map.callback = function() {
    //  _.each(Gmaps.map.markers, function(marker) {
      //  console.log("blah")
     // })
    //}
  //});
       
        $.ajax({
                type: 'POST',
                url: 'events/index',
                dataType: 'json',
                data: "latitude=" + lat + "&longitude=" + lng,          
              });
          

     
       
       //if(Gmaps.map.callback2){
       //Gmaps.map.addMarkers(markerArray);
       //console.log ("test")
       //}
        
        
       // $.getJSON('events/index.json', function() {
  //console.log(data); //you'll find your json here
//});
        //  $(document).ready(function() {
  //Gmaps.map.callback = function() {
  // Gmaps.map.addMarkers([]);
  
 //}
 
 //$(document).ready(function() {
 
// Gmaps.map.callback = function() {
 // Gmaps.map.addMarkers([[]]);}
        
  // Gmaps.map.addMarkers([]);
   
       console.log("shit2")

 
  }//)
}

 
 
 
 //};)     
        //$.post("index.html.erb");
        
       
 		//$.ajax({
		//url: '/events',
        //type: 'POST',
        //dataType: 'json',
        //data: "latitude=" + lat + "&longitude=" + lng,
      //    success: function(data) {
      //      alert("Successful");
      //    },
       //   failure: function() {
       //     alert("Unsuccessful");
       //   }
       //cache: true,
       //success: function (data) {}
   //  });
//}
            
	//} 
	
	//}
		)    
        </script>

</html>
